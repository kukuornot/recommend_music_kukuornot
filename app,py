import streamlit as st
from recommender import load_data, recommend
from youtube import get_youtube_link

st.set_page_config(page_title="AI Music Recommender", layout="centered")
st.title("ğŸ§ AI ìŒì•… ì¶”ì²œ (ë¬´ë£Œ AI ë²„ì „)")

age = st.slider("ë‚˜ì´", 10, 60, 20)

genres = st.multiselect(
    "ì„ í˜¸ ìŒì•… ì¥ë¥´",
    ["kpop", "pop", "hiphop", "rock", "jazz", "edm"]
)

languages = st.multiselect(
    "ì„ í˜¸ ì–¸ì–´",
    ["korean", "english", "japanese", "spanish"]
)

if st.button("ğŸ¶ ìŒì•… ì¶”ì²œë°›ê¸°"):
    df = load_data()
    results = recommend(age, genres, languages, df)

    for _, row in results.iterrows():
        yt = get_youtube_link(row["title"], row["artist"])

        st.subheader(f"ğŸµ {row['title']} - {row['artist']}")
        st.write(f"**ì¶”ì²œ ì´ìœ :** {row['mood']}")
        if yt:
            st.markdown(f"[â–¶ ìœ íŠœë¸Œì—ì„œ ë“£ê¸°]({yt})")
        st.divider()
